"""short_rel_names

Revision ID: b5a8781def2e
Revises: 06d37f0b30e7
Create Date: 2020-02-14 10:29:29.872236

"""
from alembic import op
import sqlalchemy as sa
import geoalchemy2
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = 'b5a8781def2e'
down_revision = '06d37f0b30e7'
branch_labels = None
depends_on = None


def upgrade():
    # This query refers to tables that are going to be renamed
    op.execute("DROP VIEW IF EXISTS brk_kadastralesubjecten_enhanced")

    # These views refer to tables that are going to be renamed
    op.execute("DROP MATERIALIZED VIEW IF EXISTS mv_brk_sdl_brk_akt_is_bron_voor_aantekening_kadastraal_object")
    op.execute("DROP MATERIALIZED VIEW IF EXISTS mv_brk_zrt_brk_sjt_ontstaan_uit_appartementsrechtsplitsing_vve")
    op.execute("DROP MATERIALIZED VIEW IF EXISTS mv_brk_zrt_brk_sjt_betrokken_bij_appartementsrechtsplitsing_vve")

    # Rename tables
    op.execute("ALTER TABLE rel_brk_zrt_brk_sjt_betrokken_bij_appartementsrechtsplitsing_vv RENAME TO rel_brk_zrt_brk_sjt__betr_apprechtsplit_vve_")
    op.execute("ALTER TABLE rel_brk_zrt_brk_sjt_ontstaan_uit_appartementsrechtsplitsing_vve RENAME TO rel_brk_zrt_brk_sjt__ontst_apprechtsplit_vve_")
    op.execute("ALTER TABLE rel_brk_sdl_brk_akt_is_bron_voor_aantekening_kadastraal_object RENAME TO rel_brk_sdl_brk_akt__bron_kad_obj_")

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###

    # Rename tables
    op.execute("ALTER TABLE rel_brk_zrt_brk_sjt__betr_apprechtsplit_vve_ RENAME TO rel_brk_zrt_brk_sjt_betrokken_bij_appartementsrechtsplitsing_vv")
    op.execute("ALTER TABLE rel_brk_zrt_brk_sjt__ontst_apprechtsplit_vve_ RENAME TO rel_brk_zrt_brk_sjt_ontstaan_uit_appartementsrechtsplitsing_vve")
    op.execute("ALTER TABLE rel_brk_sdl_brk_akt__bron_kad_obj_ RENAME TO rel_brk_sdl_brk_akt_is_bron_voor_aantekening_kadastraal_object")

    # ### end Alembic commands ###
